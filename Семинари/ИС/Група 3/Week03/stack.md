# Stack (Стек)

## Какво е стек?

![Stack visualization](https://cdn.programiz.com/sites/tutorial2program/files/stack-of-plates_0.png)

Стекът е линейна структура от данни, която следва принципа **LIFO** (Last In, First Out) - последният влязъл елемент е първият, който излиза. Може да се представи като стек от чинии - можете да добавяте и премахвате чинии само от върха на стека.

## Основни операции

- **push()** - добавя елемент в началото (върха) на стека
- **pop()** - премахва елемента от върха на стека
- **top()/peek()** - връща референция към елемента на върха без да го премахва
- **empty()** - проверява дали стекът е празен
- **size()** - връща броя на елементите в стека

## Приложения на стека

### 1. Обратна полска нотация (Reverse Polish Notation - RPN)

Обратната полска нотация е математически запис, при който операторите се поставят след операндите. Например:

- Инфиксна нотация: `3 + 4`
- RPN: `3 4 +`

#### Как работи оценяването на RPN със стек

- **Защо полски запис?** - Измислен е от Jan Łukasiewicz, за да се избегне нуждата от скоби в изразите. Пример: вместо да пишем `(3 + 4) * 2`, в RPN това става `* + 3 4 2`.

- **Защо обратен?** - Защото пишем `2 4 3 + *`.

1. Сканираме израза отляво надясно
2. Ако елементът е число, го слагаме в стека
3. Ако елементът е оператор:
   - Вземаме два елемента от стека
   - Прилагаме операцията
   - Резултатът се слага обратно в стека
4. В края остава един елемент в стека - резултатът

**Пример:** `3 4 + 2 *`

1. Слагаме 3 в стека: [3]
2. Слагаме 4 в стека: [3, 4]
3. Виждаме '+': вземаме 4 и 3, изчисляваме 3+4=7, слагаме 7: [7]
4. Слагаме 2 в стека: [7, 2]
5. Виждаме '*': вземаме 2 и 7, изчисляваме 7*2=14: [14]
6. Резултат: 14

### 2. Shunting Yard Алгоритъм (Алгоритъм на Сортировачни Станции)

![Shunting Yard](https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/Godorf_Station_at_Dusk%2C_May_2018.jpg/1280px-Godorf_Station_at_Dusk%2C_May_2018.jpg)

Shunting Yard алгоритъмът се използва за преобразуване на математически израз от инфиксна нотация в постфиксна (RPN).

#### Как работи алгоритъмът

![Shunting Yard process](https://encyclopedia.pub/media/common/202211/mceclip0-6384831767720.png)

1. **Инициализация:** Празен output и operator stack
2. **За всеки token в израза:**
   - **Число:** Добавя се директно в output
   - **Оператор:**
     - Докато в стека има оператор с по-висок или равен приоритет, го преместваме в output
     - Слагаме текущия оператор в стека
   - **Лява скоба '(':** Слага се в стека
   - **Дясна скоба ')':**
     - Преместваме всички оператори от стека в output до срещане на '('
     - Премахваме '(' от стека
3. **Накрая:** Всички останали оператори от стека се преместват в output

#### Приоритети на операторите

- `*`, `/` - приоритет 2
- `+`, `-` - приоритет 1
- `(`, `)` - специални случаи

**Пример:** `3 + 4 * 2` → `3 4 2 * +`

## Предимства и недостатъци

### Предимства

- Прости операции с константно време O(1)
- Ефективно използване на паметта
- Естествено решение за много алгоритми

### Недостатъци

- Няма произволен достъп до елементите
- Може да има ограничение на размера (при статична имплементация)

### Задачи

## Задача 1

Автентикирайте израз, съдържащ само скоби. Всяка скоба трябва да има съответстваща затваряща скоба  
[Valid Parentheses {EASY}](https://leetcode.com/problems/valid-parentheses/description/?envType=problem-list-v2&envId=stack)

**Пример**:

- `[({)}]` → Невалиден
- `[({})]` → Валиден

## Задача 2

Превърнете израз от инфиксна нотация в постфиксна (RPN)

**Пример**:

- Вход: `3 + 4 * 2 / 1 - 5`
- Изход: `3 4 2 * 1 / + 5 -`

## Задача 3

Изчислете стойността на израз. Валидни операции са `+, -, *, /,` като приоритетът им е следният: `*, /` **>** `+, -`. В изразът могат да се срещат и единични скоби `(`, `)`. При такъв случай всичко в скобите е с по висок приоритет от другите операции.  

## LeetCode

[Next Greater Element I {EASY}](https://leetcode.com/problems/next-greater-element-i/description/?envType=problem-list-v2&envId=stack) <br>
[Evaluate Reverse Polish Notation {MEDIUM}](https://leetcode.com/problems/evaluate-reverse-polish-notation/description/?envType=problem-list-v2&envId=stack) <br>
[Remove Duplicate Letters {MEDIUM}](https://leetcode.com/problems/remove-duplicate-letters/solutions/1859332/c-monotonic-stack-easy-simple-o-n/?envType=problem-list-v2&envId=stack) <br>
[Basic Calculator {HARD}](https://leetcode.com/problems/basic-calculator/description/?envType=problem-list-v2&envId=stack)
